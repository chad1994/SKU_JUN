import java.awt.event.ActionEvent;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.JOptionPane;

public class Controller implements MouseListener{
	Model model;
	Board board;
	MainFrame frame;
	Intro intro;
	

	public Controller(Model model, Board board, MainFrame frame,Intro intro) {
		this.model = model;
		this.board = board;
		this.frame = frame;
		this.intro = intro;
	}

	@Override
	public void mouseClicked(MouseEvent e) {
		// *********************************************Å¬¸¯½Ã _¹ÙµÏÆÇ ÀÓ°è¹üÀ§¿¡ µû¸¥ ¹è¿­°ª ÀÔ·Â
		int X=e.getX();
		int Y=e.getY();
		final int d = 50;
		for (int i = 0; i < 15; i++) {
			for (int j = 0; j < 15; j++) {
				if ((( X > model.X_START + (d * i)) && ( X < model.X_START + (d * (i + 1))))
						&& ((Y > model.Y_START + (d * j)) && (Y < model.Y_START + (d * (j + 1))))) {

					if (model.Counter % 2 == 0) {// Èòµ¹Â÷·Ê
						if (model.getArr(i, j) == 0) {
							model.setArr(model.WHITE, i, j);
							++model.Counter;
							model.setWhite_x(i); // Èòµ¹ÀÇ xÁÂÇ¥ ¹Þ±â
							model.setWhite_y(j); // Èòµ¹ÀÇ yÁÂÇ¥ ¹Þ±â
							// System.out.println(model.getWhite_x()+","+model.getWhite_y());
							board.repaint();
							board.play();
							if ((model.white_heightcheck(i, j) == true || model.white_widthcheck(i, j) == true
									|| model.white_leftdiagcheck(i, j) == true
									|| model.white_rightdiagcheck(i, j) == true)) {
								frame.play();
								this.endgame("¹éµ¹ ½Â¸®!!");
							}

						}
					} else {
						if (model.getArr(i, j) ==0) {// °ËÀºµ¹ Â÷·Ê
							model.setArr(model.BLACK, i, j);
							++model.Counter;
							model.setBlack_x(i); // °ËÀºµ¹ÀÇ xÁÂÇ¥ ¹Þ±â
							model.setBlack_y(j); // °ËÀºµ¹ÀÇ yÁÂÇ¥ ¹Þ±â
							// System.out.println(model.getBlack_x()+","+model.getBlack_y());
							board.repaint();
							board.play();
							if ((model.black_heightcheck(i, j) == true || model.black_widthcheck(i, j) == true
									|| model.black_leftdiagcheck(i, j) == true
									|| model.black_rightdiagcheck(i, j) == true)) {
								frame.play();
								this.endgame("Èæµ¹ ½Â¸®!!");
							}
						}
					}
				}
			}
		}
		// *****************¹è¿­ È®ÀÎ½Ä
		/*
		 * for (int a = 0; a < 15; a++) { for (int b = 0; b < 15; b++) {
		 * System.out.print(model.getArr(a, b)); } System.out.println(); }
		 */
		if((X < 100 && X>300)&&(Y <830||Y>906)){
			int result = JOptionPane.showConfirmDialog(frame, "Ç×º¹","Ç×º¹1",JOptionPane.YES_NO_OPTION);
			if( result==JOptionPane.YES_OPTION){
				if(model.Counter%2==1){
					endgame("¹éµ¹ ½Â¸®!!");
				}
				else
					endgame("Èæµ¹½Â¸®!!");
			}
		}
		
		
		
	}

	@Override
	public void mouseEntered(MouseEvent arg0) {
		// TODO Auto-generated method stub

	}

	@Override
	public void mouseExited(MouseEvent arg0) {
		// TODO Auto-generated method stub

	}

	@Override
	public void mousePressed(MouseEvent arg0) {

	}

	@Override
	public void mouseReleased(MouseEvent arg0) {
		// TODO Auto-generated method stub

	}

	public void actionPerformed(ActionEvent e) {
		if (e.getSource() == board.surrenderbt) {
			System.exit(0);
		}

	}
	public void endgame(String message){
		JOptionPane.showMessageDialog(frame,message,"5¸ñ! ½Â¸®!",JOptionPane.PLAIN_MESSAGE);
		frame.contentPane.remove(board);
		frame.contentPane.add(intro);
		frame.contentPane.repaint();
	}

}
